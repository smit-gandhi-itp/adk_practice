<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', path='css/dashboard.css') }}">
</head>

<body>
    <header style="display:flex; justify-content:space-between; align-items:center;">
        <h1>Welcome, {{ username }} ðŸŽ‰</h1>

        <div>
            <button onclick="window.location.href='/new-project'">+ New Project</button>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
    </header>

    <main>
        <h2>Your Designs</h2>
        <ul>
            {% if projects %}
                {% for project in projects %}
                    <li>
                        {{ project }}
                        <button class="view-btn"
                            onclick="window.location.href='/view-project/{{ username }}/{{ project }}'">
                            View
                        </button>
                    </li>
                {% endfor %}
            {% else %}
                <li>No projects yet</li>
            {% endif %}
        </ul>
    </main>

    <script>
    async function logout() {
        await fetch("/logout", {
            method: "POST",
            credentials: "include",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                username: "{{ username }}"
            })
        });

        window.location.href = "/";
    }
    </script>

</body>
</html>
